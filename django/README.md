در ادامه، متن ارائه‌شده در مورد **مدل‌ها (Models)**، **فرم‌ها (Forms)**، **نمایش‌ها (Views)** و **سریالایزرها (Serializers)** در Django به فارسی ترجمه شده است. ترجمه به‌گونه‌ای انجام شده که معانی اصلی حفظ شوند و ساختار متن واضح و قابل‌فهم باشد. در انتها، بررسی می‌کنم که آیا چیزی از قلم افتاده است یا خیر.

---

# مدل‌ها (Models)
مدل در Django یکی از مهم‌ترین اجزای معماری MVC (مدل-نمایش-کنترل‌کننده) یا MTV (مدل-قالب-نمایش) است. مدل‌ها مسئول مدیریت داده‌ها و تعریف ساختار پایگاه داده هستند. بیایید این موضوع را با جزئیات بیشتری بررسی کنیم:

## مدل چیست؟
مدل در Django نمایانگر داده‌هاست و به شما اجازه می‌دهد داده‌ها را تعریف، ذخیره، بازیابی و عملیات مختلفی روی آن‌ها انجام دهید. هر مدل به‌عنوان یک کلاس پایتون تعریف می‌شود و برای آن یک جدول در پایگاه داده ایجاد می‌گردد.

## ساختار یک مدل
مدل‌ها به‌صورت کلاس‌هایی تعریف می‌شوند و هر کلاس نمایانگر یک جدول است. هر ویژگی (property) کلاس، یک ستون در جدول را مشخص می‌کند.

**مثال ساده:**
```python
from django.db import models

class Book(models.Model):
    title = models.CharField(max_length=100)  
    author = models.CharField(max_length=50)  
    published_date = models.DateField()       
    price = models.DecimalField(max_digits=10, decimal_places=2)  

    def __str__(self):
        return self.title
```

## کار با مدل‌ها در پایگاه داده
شما می‌توانید از **مدیریت روابط اشیاء (ORM)** در Django برای کار با مدل‌ها استفاده کنید.

### 1. افزودن داده:
```python
book = Book(title="برنامه‌نویسی پایتون", author="جان دو", published_date="2023-01-01", price=49.99)
book.save()  
```

### 2. خواندن داده‌ها:
#### تمام داده‌ها:
```python
books = Book.objects.all()
```

#### فیلتر کردن داده‌ها:
```python
books = Book.objects.filter(author="جان دو")
```

### 3. به‌روزرسانی داده‌ها:
```python
book = Book.objects.get(id=1)  
book.price = 59.99  
book.save()  
```

### 4. حذف داده‌ها:
```python
book = Book.objects.get(id=1)
book.delete()
```

## فیلدهای رایج در مدل‌ها
| **فیلد**           | **کاربرد**                              |
|---------------------|------------------------------------------|
| **CharField**       | برای ذخیره رشته‌های کوتاه (مثل نام یا عنوان) |
| **TextField**       | برای ذخیره رشته‌های بلند (مثل توضیحات)  |
| **IntegerField**    | برای ذخیره اعداد صحیح                  |
| **DecimalField**    | برای ذخیره اعداد اعشاری (مثل قیمت)    |
| **DateField**       | برای ذخیره تاریخ                       |
| **DateTimeField**   | برای ذخیره تاریخ و زمان                 |
| **BooleanField**    | برای ذخیره مقادیر `True` یا `False`    |
| **ForeignKey**      | برای ایجاد رابطه یک‌به‌چند با مدل دیگر  |
| **ManyToManyField** | برای ایجاد رابطه چند‌به‌چند بین مدل‌ها |

## ایجاد روابط بین مدل‌ها
مدل‌ها می‌توانند با یکدیگر مرتبط شوند و شما می‌توانید به‌راحتی این روابط را تعریف کنید.

- **مثال رابطه یک‌به‌چند:**
یک نویسنده می‌تواند چندین کتاب داشته باشد:
```python
class Author(models.Model):
    name = models.CharField(max_length=100)

class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.ForeignKey(Author, on_delete=models.CASCADE)
```

- **مثال رابطه چند‌به‌چند:**
یک دانش‌آموز می‌تواند در چندین کلاس شرکت کند و یک کلاس می‌تواند چندین دانش‌آموز داشته باشد:
```python
class Student(models.Model):
    name = models.CharField(max_length=100)

class Class(models.Model):
    name = models.CharField(max_length=100)
    students = models.ManyToManyField(Student)
```

### مهاجرت‌ها (Migrations) در Django
**مهاجرت‌ها** در Django مکانیزمی برای مدیریت و اعمال تغییرات در طرح پایگاه داده هستند. هر زمان که مدل جدیدی ایجاد کنید یا مدل موجود را تغییر دهید، باید از مهاجرت‌ها برای اعمال این تغییرات در پایگاه داده استفاده کنید.

---

### مراحل کار با مهاجرت‌ها

#### 1. ایجاد فایل‌های مهاجرت
وقتی تغییراتی در مدل‌ها ایجاد می‌کنید (مثل افزودن مدل جدید یا تغییر یک فیلد)، باید این تغییرات را به Django اطلاع دهید. این کار با اجرای دستور زیر انجام می‌شود:
```bash
python manage.py makemigrations
```
- این دستور مدل‌های شما را بررسی می‌کند و فایل‌های مهاجرت را در پوشه `migrations` برنامه شما ایجاد می‌کند.
- این فایل‌ها تغییراتی که باید در پایگاه داده اعمال شوند را توصیف می‌کنند.

##### مثال:
فرض کنید مدل زیر را به برنامه خود اضافه کنید:
```python
class Author(models.Model):
    name = models.CharField(max_length=100)
```
پس از اجرای `makemigrations`， Django یک فایل مهاجرت مثل این تولید می‌کند:
```
Migrations for 'your_app_name':
  your_app_name/migrations/0001_initial.py
    - Create model Author
```

---

#### 2. اعمال مهاجرت‌ها به پایگاه داده
پس از ایجاد فایل‌های مهاجرت، آن‌ها را با دستور زیر به پایگاه داده اعمال می‌کنید:
```bash
python manage.py migrate
```
- این دستور فایل‌های مهاجرت را می‌خواند و دستورات SQL لازم را برای اعمال تغییرات در پایگاه داده اجرا می‌کند.

##### مثال:
پس از اجرای دستور `migrate`:
- جدول `Author` در پایگاه داده با ستون‌های `id` (کلید اصلی پیش‌فرض) و `name` ایجاد می‌شود.

---

### نکات کلیدی درباره مهاجرت‌ها

#### 1. پوشه مهاجرت‌ها
- هر برنامه در Django یک پوشه `migrations` دارد که فایل‌های مهاجرت در آن ذخیره می‌شوند.
- این فایل‌ها تاریخچه تغییرات اعمال‌شده در طرح پایگاه داده را ثبت می‌کنند.

#### 2. نسخه‌بندی فایل‌های مهاجرت
- فایل‌های مهاجرت به‌صورت متوالی شماره‌گذاری می‌شوند (مثل `0001_initial.py`، `0002_auto.py`).
- شماره‌گذاری تضمین می‌کند که مهاجرت‌ها به ترتیب صحیح اعمال شوند.

#### 3. مشاهده وضعیت مهاجرت‌ها
می‌توانید وضعیت مهاجرت‌ها را با دستور زیر بررسی کنید:
```bash
python manage.py showmigrations
```
**خروجی نمونه:**
```
[ ] 0001_initial
[X] 0002_add_new_field
```
- `[ ]`: مهاجرت اعمال نشده است.
- `[X]`: مهاجرت اعمال شده است.

#### 4. بازگشت به عقب (Rollback)
می‌توانید به نسخه خاصی از مهاجرت بازگردید با:
```bash
python manage.py migrate your_app_name 0001
```
این کار تمام مهاجرت‌های اعمال‌شده پس از `0001` را لغو می‌کند.

---

### جریان کاری معمول
1. **تعریف یا ویرایش مدل‌ها:**
   مدل‌های خود را در فایل `models.py` تغییر دهید.
   ```python
   class Book(models.Model):
       title = models.CharField(max_length=100)
   ```

2. **ایجاد فایل‌های مهاجرت:**
   دستور `makemigrations` را اجرا کنید.
   ```bash
   python manage.py makemigrations
   ```

3. **اعمال مهاجرت‌ها:**
   دستور `migrate` را اجرا کنید.
   ```bash
   python manage.py migrate
   ```

---

### مثال واقعی

#### مرحله 1: مدل اولیه
فرض کنید مدلی مثل این تعریف کنید:
```python
class Book(models.Model):
    title = models.CharField(max_length=100)
```
اجرا کنید:
```bash
python manage.py makemigrations
python manage.py migrate
```
این کار جدول `Book` را در پایگاه داده ایجاد می‌کند.

#### مرحله 2: تغییر مدل
بعداً تصمیم می‌گیرید یک فیلد جدید اضافه کنید:
```python
class Book(models.Model):
    title = models.CharField(max_length=100)
    author = models.CharField(max_length=50)  # فیلد جدید
```
اجرا کنید:
```bash
python manage.py makemigrations
python manage.py migrate
```
- یک فایل مهاجرت جدید برای افزودن فیلد `author` ایجاد می‌شود.
- پس از اعمال، ستون `author` به جدول `Book` در پایگاه داده اضافه می‌شود.

---

### چرا مهاجرت‌ها مهم هستند؟
1. **مدیریت طرح پایگاه داده:**
   مهاجرت‌ها اطمینان می‌دهند که طرح پایگاه داده همیشه با مدل‌های شما همگام است.
2. **کنترل نسخه:**
   می‌توانید تغییرات طرح را ردیابی کرده و در صورت نیاز به نسخه‌های قبلی بازگردید.
3. **مدیریت خودکار SQL:**
   Django دستورات SQL لازم را تولید و اعمال می‌کند، بنابراین نیازی به نوشتن دستی آن‌ها نیست.

---

### خلاصه دستورات
| **دستور**                              | **هدف**                              |
|-----------------------------------------|---------------------------------------|
| `python manage.py makemigrations`       | ایجاد فایل‌های مهاجرت برای تغییرات مدل |
| `python manage.py migrate`              | اعمال مهاجرت‌ها به پایگاه داده       |
| `python manage.py showmigrations`       | مشاهده وضعیت مهاجرت‌ها              |
| `python manage.py migrate your_app_name 0001` | بازگشت به یک مهاجرت خاص       |

---

# فرم‌ها (Forms)
اجازه دهید تفاوت بین **مدل (Model)** و **فرم (Form)** را به‌صورت ساده‌تر با مثال توضیح دهم:

## 1. مدل (Model):
مدل در Django ساختار پایگاه داده شما را نشان می‌دهد. مدل مشخص می‌کند که چه نوع داده‌هایی در پایگاه داده ذخیره می‌شوند و چگونه این داده‌ها به یکدیگر مرتبط هستند.

**ویژگی‌های مدل:**
- مسئول تعریف و ذخیره داده‌ها در پایگاه داده است.
- تمام ستون‌ها (فیلدها) در جدول‌های پایگاه داده را تعریف می‌کند.

**مثال:**
فرض کنید می‌خواهید اطلاعاتی درباره پست‌های وبلاگ در سایت خود ذخیره کنید. برای این کار یک مدل تعریف می‌کنید:
```python
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)  
    content = models.TextField()            
    created_at = models.DateTimeField(auto_now_add=True)  
```
این مدل به شما می‌گوید:
- هر پست یک عنوان دارد (متن با حداکثر 200 کاراکتر).
- هر پست دارای محتوا است (متن طولانی).
- تاریخ ایجاد (created_at) به‌صورت خودکار ذخیره می‌شود.

## 2. فرم (Form):
فرم ابزاری است که برای دریافت داده از کاربر و اعتبارسنجی این داده‌ها استفاده می‌شود. فرم به شما کمک می‌کند مطمئن شوید داده‌هایی که کاربر وارد می‌کند، صحیح و معتبر هستند.

**ویژگی‌های فرم:**
- مسئول دریافت و پردازش ورودی کاربر است.
- داده‌ها را از کاربر دریافت کرده و آن‌ها را اعتبارسنجی می‌کند (مثلاً بررسی می‌کند که ایمیل معتبر باشد).
- داده‌ها می‌توانند به پایگاه داده ارسال شوند یا به روش دیگری پردازش شوند.

**مثال:**
فرمی برای دریافت اطلاعات یک پست وبلاگ:
```python
from django import forms

class PostForm(forms.Form):
    title = forms.CharField(max_length=200, label="عنوان")
    content = forms.CharField(widget=forms.Textarea, label="محتوا")
```
این فرم از کاربر می‌خواهد:
- یک عنوان وارد کند.
- محتوایی بنویسد.

### جدول تفاوت‌های اصلی بین مدل و فرم:
| **ویژگی**           | **مدل (Model)**                       | **فرم (Form)**                       |
|-----------------------|----------------------------------------|---------------------------------------|
| **هدف**              | تعریف ساختار داده‌ها در پایگاه داده | دریافت و اعتبارسنجی داده از کاربر   |
| **کاربرد**           | ذخیره و مدیریت داده‌ها در پایگاه داده | رندر فرم‌ها در HTML و پردازش ورودی |
| **ارتباط با پایگاه داده** | مستقیم (متصل به جدول‌های پایگاه داده) | غیرمستقیم (خودش داده را ذخیره نمی‌کند) |

در Django، فرم یکی از اجزای کلیدی برای مدیریت و اعتبارسنجی ورودی کاربر است. فرم‌ها در Django به دو روش اصلی استفاده می‌شوند: فرم‌های معمولی و فرم‌های مدل.

### 1. فرم‌های معمولی (Forms):
این نوع فرم‌ها به‌صورت دستی تعریف می‌شوند و برای پردازش داده‌هایی استفاده می‌شوند که لزوماً به مدل متصل نیستند.

**ساختار:**
برای ایجاد یک فرم، از کلاس `forms.Form` استفاده می‌کنید. هر فیلد در فرم به‌عنوان یک ویژگی تعریف می‌شود که نوع داده و خصوصیات آن را مشخص می‌کند.
```python
from django import forms

class ContactForm(forms.Form):
    name = forms.CharField(max_length=100, label='نام')
    email = forms.EmailField(label='ایمیل')
    message = forms.CharField(widget=forms.Textarea, label='پیام')
```
**توضیحات:**
- `CharField`: برای داده‌های متنی.
- `EmailField`: برای ایمیل و اعتبارسنجی آن.
- `widget`: برای مشخص کردن نوع ورودی HTML (مثلاً `Textarea` برای متن طولانی).

### 2. فرم‌های مدل (ModelForms):
این نوع فرم‌ها برای ایجاد فرم‌هایی استفاده می‌شوند که مستقیماً به مدل‌های پایگاه داده متصل هستند. فرم‌های مدل کار را بسیار ساده‌تر می‌کنند زیرا نیازی به تعریف دستی فیلدها ندارید و می‌توانید فیلدها را مستقیماً از مدل استخراج کنید.

**ساختار:**
برای ایجاد فرم مدل، از کلاس `forms.ModelForm` استفاده می‌شود.

فرض کنید مدلی به نام `Post` داریم:
```python
from django.db import models

class Post(models.Model):
    title = models.CharField(max_length=200)
    content = models.TextField()
    created_at = models.DateTimeField(auto_now_add=True)
```
می‌توانید یک فرم مدل برای این مدل بسازید:
```python
from django import forms
from .models import Post

class PostForm(forms.ModelForm):
    class Meta:
        model = Post
        fields = ['title', 'content']
```

---

# نمایش‌ها (Views)
در Django، **نمایش‌ها (Views)** یکی از بخش‌های اصلی و کلیدی فریم‌ورک هستند که مسئول پردازش درخواست‌های دریافت‌شده از کاربر و بازگرداندن پاسخ مناسب به او می‌باشند. نمایش‌ها در واقع پلی بین مدل‌ها و قالب‌ها هستند و منطق برنامه را مدیریت می‌کنند.

## انواع نمایش‌ها در Django:
1. **نمایش‌های مبتنی بر تابع (Function-based Views - FBV):**
   - یک تابع ساده در پایتون است که یک شیء `HttpRequest` را به‌عنوان ورودی می‌گیرد و یک شیء `HttpResponse` را بازمی‌گرداند.
   - این نوع نمایش معمولاً برای منطق‌های ساده استفاده می‌شود.
   ```python
   from django.http import HttpResponse

   def my_view(request):
       return HttpResponse("سلام، جهان!")
   ```

2. **نمایش‌های مبتنی بر کلاس (Class-based Views - CBV):**
   - در این نوع نمایش، به‌جای توابع از کلاس‌ها استفاده می‌شود. این روش کد را ساختارمندتر و قابل‌گسترش‌تر می‌کند.
   - کلاس‌های نمایش از کلاس پایه `View` که در ماژول `django.views` قرار دارد، ارث‌بری می‌کنند.
   ```python
   from django.http import HttpResponse
   from django.views import View

   class MyView(View):
       def get(self, request):
           return HttpResponse("سلام، جهان!")
   ```

3. **نمایش‌های عمومی (Generic Views):**
   - Django مجموعه‌ای از نمایش‌های عمومی آماده ارائه می‌دهد که برای انجام عملیات رایج مثل نمایش لیست، جزئیات یک شیء، ایجاد، به‌روزرسانی و حذف شیء استفاده می‌شوند. این نمایش‌ها زمان توسعه را کاهش می‌دهند.
   ```python 
   from django.views.generic import ListView
   from .models import MyModel

   class MyModelListView(ListView):
       model = MyModel
       template_name = 'myapp/mymodel_list.html'
   ```

## نحوه کار یک نمایش
1. **دریافت درخواست:**
   وقتی کاربر یک URL خاص را درخواست می‌کند، Django ابتدا در فایل `urls.py` به دنبال URL مربوطه می‌گردد و نمایش مرتبط را پیدا می‌کند.

2. **پردازش منطق:**
   نمایش (چه تابع باشد چه کلاس) منطق مربوط به درخواست را اجرا می‌کند. این منطق می‌تواند شامل بازیابی اطلاعات از پایگاه داده، اعتبارسنجی داده‌ها یا پردازش فرم‌ها باشد.

3. **بازگرداندن پاسخ:**
   در نهایت، نمایش یک پاسخ (معمولاً یک `HttpResponse` یا صفحه HTML) به کاربر بازمی‌گرداند.

---

# سریالایزرها (Serializers)
در Django، **سریالایزرها (Serializers)** ابزارهایی برای تبدیل داده‌ها بین انواع مختلف (مانند مدل‌های پایگاه داده و فرمت‌های JSON یا XML) هستند. به عبارت دیگر، یک سریالایزر داده‌ها را از فرم‌های پیچیده مدل به فرمت‌های قابل‌حمل (مانند JSON) تبدیل می‌کند و همچنین داده‌های ورودی را به فرمت‌هایی تبدیل می‌کند که می‌توان در مدل‌ها استفاده کرد.

## انواع سریالایزرها در Django
1. **سریالایزر پایه (Basic Serializer):**
   - این نوع سریالایزر داده‌های ساده و ابتدایی را به فرمت‌های مختلف تبدیل می‌کند. به‌عنوان مثال، یک لیست از داده‌ها (مانند دیکشنری یا لیست) را به فرمت JSON یا فرمت‌های دیگر تبدیل می‌کند.
   ```python
   from rest_framework import serializers

   class PersonSerializer(serializers.Serializer):
       name = serializers.CharField(max_length=100)
       age = serializers.IntegerField()
   ```

2. **مدل‌ سریالایزر (ModelSerializer):**
   - این نوع سریالایزر یک روش سریع‌تر و آسان‌تر برای کار با مدل‌ها است. ModelSerializer به‌طور خودکار فیلدهای مدل را سریال‌سازی می‌کند و تبدیل داده‌ها به و از مدل‌های Django را آسان‌تر می‌کند.
   ```python
   from rest_framework import serializers
   from .models import Person

   class PersonSerializer(serializers.ModelSerializer):
       class Meta:
           model = Person
           fields = ['name', 'age']   
   ```

## کاربردهای اصلی سریالایزرها
- **تبادل داده‌ها بین کلاینت و سرور:** استفاده از فرمت‌هایی مثل JSON برای ارسال و دریافت داده‌ها.
- **اعتبارسنجی داده‌ها:** برای اطمینان از صحت داده‌ها قبل از ذخیره در پایگاه داده.
- **ساده‌سازی ایجاد API:** استفاده از ModelSerializer برای تبدیل سریع داده‌ها و ذخیره در پایگاه داده.
- **ویژگی‌ها و قابلیت‌های اضافی:** می‌توانید اعتبارسنجی‌های سفارشی برای داده‌ها اضافه کنید.
